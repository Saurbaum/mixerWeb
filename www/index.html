
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>mixerWeb</title>
		<link rel="stylesheet" href="./jquery-ui.min.css">
		<link rel="stylesheet" href="./jquery-ui.structure.min.css">
		<link rel="stylesheet" href="./jquery-ui.theme.min.css">
		<link rel="stylesheet" href="./mixer.css">
  		<script src="./jquery-2.1.4.min.js"></script>
		<script src="./jquery-ui.min.js"></script>
  	</head>
	<body>
		<script type="text/javascript">
			var timeoutInterval = 125;
			var sentData = "";
			function postData(path, params) {
				$.post("/" + path, params);
			}
			function setupPlayback() {
				$( "#previous" ).button({
			      text: false,
			      icons: {
			        primary: "ui-icon-seek-start"
			      }
			    });
			    $( "#play" ).button({
			      text: false,
			      icons: {
			        primary: "ui-icon-play"
			      }
			    })
			    .click(function() {
			      var options;
			      if ( $( this ).text() === "play" ) {
			        options = {
			          label: "pause",
			          icons: {
			            primary: "ui-icon-pause"
			          }
			        };
			      } else {
			        options = {
			          label: "play",
			          icons: {
			            primary: "ui-icon-play"
			          }
			        };
			      }
			      $( this ).button( "option", options );
			    });
			    $( "#stop" ).button({
			      text: false,
			      icons: {
			        primary: "ui-icon-stop"
			      }
			    })
			    .click(function() {
			      $( "#play" ).button( "option", {
			        label: "play",
			        icons: {
			          primary: "ui-icon-play"
			        }
			      });
			    });
			    $( "#next" ).button({
			      text: false,
			      icons: {
			        primary: "ui-icon-seek-end"
			      }
			    });
			}
			function initSlider(id) {
				var selector = "#slider-vertical" + id;
				var value = "#amount" + id;
				var buttonUpFast = "#button-up-fast" + id;
				var buttonUp = "#button-up" + id;
				var buttonDown = "#button-down" + id;
				var buttonDownFast = "#button-down-fast" + id;
				var buttonOff = "#button-off" + id;
				
				function updateValue(val) {
					if (val < 0 ) {
						val = 0;
					}
					if ( val > 100) {
						val = 100;
					}

					$( value ).val( val );
				}

			    $( selector ).slider({
			    	orientation: "vertical",
			    	range: "min",
			    	min: 0,
			    	max: 100,
			    	value: 60,
			    	slide: function( event, ui ) {
			    		updateValue( ui.value );
			    	}
			    });
			    $( value ).val( $( selector ).slider( "value" ) );
			    $( buttonUpFast ).button({
			    	text: false,
			    	icons: {
			    		primary: "up-fast"
			    	}
			    }).click( function(){
			    	var dataVal = $( selector ).slider( "value" ) + 10;
			    	$( selector ).slider( "value", dataVal );
			    	updateValue( dataVal );
			    });
			    $( buttonUp ).button({
			    	text: false,
			    	icons: {
			    		primary: "up-slow"
			    	}
			    }).click( function(){
			    	var dataVal = $( selector ).slider( "value" ) + 2;
			    	$( selector ).slider( "value", dataVal );
			    	updateValue( dataVal );
			    });
			    $( buttonDown ).click( function(){
			    	var dataVal = $( selector ).slider( "value" ) - 2;
			    	$( selector ).slider( "value", dataVal );
			    	updateValue( dataVal );
			    });
			    $( buttonDownFast ).click( function(){
			    	var dataVal = $( selector ).slider( "value" ) - 10;
			    	$( selector ).slider( "value", dataVal );
			    	updateValue( dataVal );
			    });
			    $( buttonOff ).button({
			    	text: false,
					icons: {
			        	primary: "mute"
			     	}
			    }).click( function (){
					$( selector ).slider( "value", 0 );
			    	updateValue( 0 );
			    });
			};
			
			
			$(function() {
				for (var i = 1; i < 8; ++i) {
					initSlider(i);
				};

				setupPlayback();
 			});

			function submitData(force) {
				var sliderData = $( "#amount1" ).val()+","+
					$( "#amount2" ).val()+","+
					$( "#amount3" ).val()+","+
					$( "#amount4" ).val()+","+
					$( "#amount5" ).val()+","+
					$( "#amount6" ).val()+","+
					$( "#amount7" ).val();
				
				if (sentData !== sliderData){
					postData('setVolumes', sliderData);

					sentData = sliderData;
				}

				setTimeout(submitData, timeoutInterval);
			};


			$(document).ready(function() {
				submitData();
			});
		</script>
		<table>
			<tr>
				<td>
					<div class="volume-header">
						<label class="volume-label" for="amount1">Ch 1:</label><input class="volume-ammount" type="text" id="amount1" readonly>
					</div>
				</td>
				<td>
					<div class="volume-header">
						<label class="volume-label" for="amount2">Ch 2:</label><input class="volume-ammount" type="text" id="amount2" readonly>
					</div>
				</td>
				<td>
					<div class="volume-header">
						<label class="volume-label" for="amount3">Ch 3:</label><input class="volume-ammount" type="text" id="amount3" readonly>
					</div>
				</td>
				<td>
					<div class="volume-header">
						<label class="volume-label" for="amount4">Ch 4:</label><input class="volume-ammount" type="text" id="amount4" readonly>
					</div>
				</td>
				<td>
					<div class="volume-header">
						<label class="volume-label" for="amount5">Ch 5:</label><input class="volume-ammount" type="text" id="amount5" readonly>
					</div>
				</td>
				<td>
					<div class="volume-header">
						<label class="volume-label" for="amount6">Ch 6:</label><input class="volume-ammount" type="text" id="amount6" readonly>
					</div>
				</td>
				<td>
					<div class="volume-header">
						<label class="volume-label" for="amount7">Master:</label><input class="volume-ammount" type="text" id="amount7" readonly>
					</div>
				</td>
			</tr>
			<tr>
				<td>
					<div class="volume-slider" id="slider-vertical1" style="height:200px;"></div>
				</td>
				<td>
					<div class="volume-slider" id="slider-vertical2" style="height:200px;"></div>
				</td>
				<td>
					<div class="volume-slider" id="slider-vertical3" style="height:200px;"></div>
				</td>
				<td>
					<div class="volume-slider" id="slider-vertical4" style="height:200px;"></div>
				</td>
				<td>
					<div class="volume-slider" id="slider-vertical5" style="height:200px;"></div>
				</td>
				<td>
					<div class="volume-slider" id="slider-vertical6" style="height:200px;"></div>
				</td>
				<td>
					<div class="volume-slider" id="slider-vertical7" style="height:200px;"></div>
				</td>
			</tr>
			<tr>
				<td>
					<div class="volume-button-holder">
						<p><button id="button-up-fast1">more up</button></p>
						<p><button id="button-up1">up</button></p>
						<p><button class="volume-down" id="button-down1"><img src="./images/downSlow.png"></button></p>
						<p><button class="volume-down-fast" id="button-down-fast1"><img src="./images/downFast.png"></button></p>
						<p><button id="button-off1">mute</button></p>
					</div>
				</td>
				<td>
					<div class="volume-button-holder">
						<p><button id="button-up-fast2">more up</button></p>
						<p><button id="button-up2">up</button></p>
						<p><button class="volume-down" id="button-down2"><img src="./images/downSlow.png"></button></p>
						<p><button class="volume-down-fast" id="button-down-fast2"><img src="./images/downFast.png"></button></p>
						<p><button id="button-off2">mute</button></p>
					</div>
				</td>
				<td>
					<div class="volume-button-holder">
						<p><button id="button-up-fast3">more up</button></p>
						<p><button id="button-up3">up</button></p>
						<p><button class="volume-down" id="button-down3"><img src="./images/downSlow.png"></button></p>
						<p><button class="volume-down-fast" id="button-down-fast3"><img src="./images/downFast.png"></button></p>					
						<p><button id="button-off3">mute</button></p>
					</div>
				</td>
				<td>
					<div class="volume-button-holder">
						<p><button id="button-up-fast4">more up</button></p>
						<p><button id="button-up4">up</button></p>
						<p><button class="volume-down" id="button-down4"><img src="./images/downSlow.png"></button></p>
						<p><button class="volume-down-fast" id="button-down-fast4"><img src="./images/downFast.png"></button></p>
						<p><button id="button-off4">mute</button></p>
					</div>
				</td>
				<td>
					<div class="volume-button-holder">
						<p><button id="button-up-fast5">more up</button></p>
						<p><button id="button-up5">up</button></p>
						<p><button class="volume-down" id="button-down5"><img src="./images/downSlow.png"></button></p>
						<p><button class="volume-down-fast" id="button-down-fast5"><img src="./images/downFast.png"></button></p>
						<p><button id="button-off5">mute</button></p>
					</div>
				</td>
				<td>
					<div class="volume-button-holder">
						<p><button id="button-up-fast6">more up</button></p>
						<p><button id="button-up6">up</button></p>
						<p><button class="volume-down" id="button-down6"><img src="./images/downSlow.png"></button></p>
						<p><button class="volume-down-fast" id="button-down-fast6"><img src="./images/downFast.png"></button></p>
						<p><button id="button-off6">mute</button></p>
					</div>
				</td>
				<td>
					<div class="volume-button-holder">
						<p><button id="button-up-fast7">more up</button></p>
						<p><button id="button-up7">up</button></p>
						<p><button class="volume-down" id="button-down7"><img src="./images/downSlow.png"></button></p>
						<p><button class="volume-down-fast" id="button-down-fast7"><img src="./images/downFast.png"></button></p>
						<p><button id="button-off7">mute</button></p>
					</div>
				</td>
			</tr>
		</table>
		<div id="toolbar" class="ui-widget-header ui-corner-all">
			<button id="previous">previous</button>
			<button id="play">play</button>
			<button id="stop">stop</button>
			<button id="next">next</button>
		</div>
	</body>
</html>